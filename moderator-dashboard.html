<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Only Divorce - Moderator Dashboard</title>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'divorce-blue': '#2563EB',
                        'divorce-dark': '#1E40AF',
                        'divorce-light': '#DBEAFE',
                        'divorce-pink': '#F472B6',
                        'divorce-purple': '#8B5CF6',
                        'divorce-indigo': '#6366F1',
                        'divorce-cyan': '#06B6D4',
                        'divorce-teal': '#14B8A6',
                        'divorce-green': '#10B981',
                        'divorce-yellow': '#F59E0B',
                        'divorce-orange': '#F97316',
                        'divorce-emerald': '#10B981',
                        'divorce-rose': '#F43F5E',
                        'divorce-violet': '#7C3AED',
                        'divorce-fuchsia': '#D946EF',
                        'divorce-lime': '#65A30D',
                        'divorce-amber': '#D97706',
                        'divorce-sky': '#0EA5E9',
                        'divorce-slate': '#64748B',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-in': 'slideIn 0.5s ease-out',
                        'bounce-in': 'bounceIn 0.6s ease-out',
                        'scale-in': 'scaleIn 0.3s ease-out',
                        'rotate-in': 'rotateIn 0.5s ease-out',
                        'pulse-glow': 'pulseGlow 2s ease-in-out infinite alternate',
                        'float': 'float 3s ease-in-out infinite',
                        'gradient-shift': 'gradientShift 3s ease-in-out infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        bounceIn: {
                            '0%': { transform: 'scale(0.3)', opacity: '0' },
                            '50%': { transform: 'scale(1.05)' },
                            '70%': { transform: 'scale(0.9)' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        },
                        rotateIn: {
                            '0%': { transform: 'rotate(-180deg) scale(0)', opacity: '0' },
                            '100%': { transform: 'rotate(0deg) scale(1)', opacity: '1' },
                        },
                        pulseGlow: {
                            '0%': { boxShadow: '0 0 5px rgba(37, 99, 235, 0.5)' },
                            '100%': { boxShadow: '0 0 20px rgba(37, 99, 235, 0.8), 0 0 30px rgba(37, 99, 235, 0.4)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        gradientShift: {
                            '0%, 100%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                        },
                    },
                }
            }
        }
    </script>
    <style>
        .glass-morphism {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .card-3d {
            transform-style: preserve-3d;
            transition: transform 0.3s ease;
        }
        .card-3d:hover {
            transform: rotateY(5deg) rotateX(5deg) translateZ(20px);
        }
        .text-glow {
            text-shadow: 0 0 10px rgba(37, 99, 235, 0.5);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-white to-slate-100 min-h-screen">
    <!-- Chat Management Panel -->
    <div id="moderatorChatPanel" class="fixed bottom-4 left-4 bg-white rounded-2xl shadow-2xl border-2 border-green-200 w-80 h-96 flex flex-col hidden z-50 animate-fade-in">
        <!-- Chat Header -->
        <div class="bg-gradient-to-r from-green-600 to-green-700 text-white p-4 rounded-t-2xl flex items-center justify-between">
            <div class="flex items-center">
                <div class="bg-white bg-opacity-20 rounded-full p-2 mr-3">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                    </svg>
                </div>
                <div>
                    <h3 class="font-semibold">User Chat Management</h3>
                    <p class="text-xs opacity-90">2 active conversations</p>
                </div>
            </div>
            <button onclick="toggleModeratorChat()" class="text-white hover:text-gray-200">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>

        <!-- Active Users List -->
        <div class="p-4 bg-gray-50 border-b border-gray-200">
            <h4 class="font-semibold text-gray-800 mb-2">Active Users</h4>
            <div class="space-y-2">
                <div class="flex items-center justify-between p-2 bg-white rounded-lg cursor-pointer hover:bg-gray-50" onclick="selectUserChat('user1')">
                    <div class="flex items-center">
                        <div class="bg-green-100 rounded-full p-2 mr-2">
                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                        <div>
                            <p class="text-sm font-medium">Anonymous User</p>
                            <p class="text-xs text-gray-500">Women's Support Group</p>
                        </div>
                    </div>
                    <div class="bg-green-500 text-white text-xs px-2 py-1 rounded-full">2</div>
                </div>

                <div class="flex items-center justify-between p-2 bg-white rounded-lg cursor-pointer hover:bg-gray-50" onclick="selectUserChat('user2')">
                    <div class="flex items-center">
                        <div class="bg-blue-100 rounded-full p-2 mr-2">
                            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                        <div>
                            <p class="text-sm font-medium">Anonymous User</p>
                            <p class="text-xs text-gray-500">Child Custody Group</p>
                        </div>
                    </div>
                    <div class="bg-orange-500 text-white text-xs px-2 py-1 rounded-full">1</div>
                </div>
            </div>
        </div>

        <!-- Chat Messages (for selected user) -->
        <div id="moderatorChatMessages" class="flex-1 p-4 overflow-y-auto bg-white space-y-3">
            <div class="text-center text-gray-500 text-sm py-4">
                Select a user to view conversation
            </div>
        </div>

        <!-- Chat Input -->
        <div class="p-4 bg-white border-t border-gray-200 rounded-b-2xl">
            <div class="flex space-x-2">
                <input type="text" id="moderatorChatInput" placeholder="Type your response..." class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm">
                <button onclick="sendModeratorMessage()" class="bg-green-600 text-white p-2 rounded-lg hover:bg-green-700 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Floating Chat Management Button -->
    <button onclick="toggleModeratorChat()" id="moderatorChatToggleBtn" class="fixed bottom-4 left-4 bg-green-600 text-white p-3 rounded-full shadow-lg hover:bg-green-700 transition-all duration-300 z-40">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
        </svg>
        <span class="absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">3</span>
    </button>

    <!-- Notification Panel (Initially Hidden) -->
    <div id="notificationPanel" class="fixed top-20 right-4 bg-green-500 text-white p-4 rounded-lg shadow-lg z-50 animate-bounce-in hidden max-w-sm">
        <div class="flex items-center">
            <span class="text-2xl mr-3">üéâ</span>
            <div class="flex-1">
                <p class="font-bold">New User Joined!</p>
                <p class="text-sm" id="notificationTopic">Topic - Group</p>
                <p class="text-xs opacity-90" id="notificationTime">Time</p>
            </div>
            <button onclick="hideNotification()" class="ml-2 text-white hover:text-gray-200">√ó</button>
        </div>
    </div>

    <nav class="bg-divorce-dark shadow-lg animate-fade-in">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-white text-glow animate-pulse-glow">Moderator Dashboard</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-white animate-fade-in">Welcome, Moderator!</span>
                    <button onclick="logout()" class="bg-gradient-to-r from-divorce-blue to-divorce-indigo text-white px-4 py-2 rounded-lg hover:from-divorce-indigo hover:to-divorce-blue transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl font-medium">Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Dashboard Overview -->
    <section class="py-16 bg-gradient-to-br from-white via-slate-50 to-white animate-fade-in">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
                <!-- Active Groups Card -->
                <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl shadow-xl p-8 card-3d border-2 border-blue-200 hover:border-blue-400 animate-bounce-in">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-blue-800 mb-2">Active Groups</h3>
                            <p class="text-4xl font-bold text-blue-600">12</p>
                            <p class="text-sm text-blue-600 mt-2">Currently moderating</p>
                        </div>
                        <div class="bg-blue-500 rounded-full p-4">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Total Participants Card -->
                <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-2xl shadow-xl p-8 card-3d border-2 border-green-200 hover:border-green-400 animate-bounce-in">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-green-800 mb-2">Total Participants</h3>
                            <p class="text-4xl font-bold text-green-600">248</p>
                            <p class="text-sm text-green-600 mt-2">Across all groups</p>
                        </div>
                        <div class="bg-green-500 rounded-full p-4">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Today's Sessions Card -->
                <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl shadow-xl p-8 card-3d border-2 border-purple-200 hover:border-purple-400 animate-bounce-in">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-purple-800 mb-2">Today's Sessions</h3>
                            <p class="text-4xl font-bold text-purple-600">8</p>
                            <p class="text-sm text-purple-600 mt-2">Scheduled today</p>
                        </div>
                        <div class="bg-purple-500 rounded-full p-4">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Pending Requests Card -->
                <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl shadow-xl p-8 card-3d border-2 border-orange-200 hover:border-orange-400 animate-bounce-in">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-orange-800 mb-2">Pending Requests</h3>
                            <p class="text-4xl font-bold text-orange-600">5</p>
                            <p class="text-sm text-orange-600 mt-2">Awaiting approval</p>
                        </div>
                        <div class="bg-orange-500 rounded-full p-4">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                <!-- My Groups Section -->
                <div class="bg-white rounded-2xl shadow-xl p-8 animate-slide-in">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center">
                        <span class="text-blue-600 mr-3">üë•</span>
                        My Active Groups
                    </h2>
                    <div class="space-y-4">
                        <div class="bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg border-l-4 border-blue-500">
                            <h3 class="font-semibold text-blue-800">Women's Support - English</h3>
                            <p class="text-sm text-blue-600 mt-1">15 participants ‚Ä¢ Next session: 2:00 PM</p>
                        </div>
                        <div class="bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg border-l-4 border-green-500">
                            <h3 class="font-semibold text-green-800">Child Custody - Hindi</h3>
                            <p class="text-sm text-green-600 mt-1">8 participants ‚Ä¢ Next session: 4:00 PM</p>
                        </div>
                        <div class="bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg border-l-4 border-purple-500">
                            <h3 class="font-semibold text-purple-800">Emotional Support - Tamil</h3>
                            <p class="text-sm text-purple-600 mt-1">12 participants ‚Ä¢ Next session: 6:00 PM</p>
                        </div>
                    </div>
                    <button onclick="viewAllGroups()" class="mt-6 w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 px-6 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl font-semibold">
                        View All Groups ‚Üí
                    </button>
                </div>

                <!-- Recent Activity -->
                <div class="bg-white rounded-2xl shadow-xl p-8 animate-slide-in">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center">
                        <span class="text-green-600 mr-3">üìä</span>
                        Recent Activity
                    </h2>
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4">
                            <div class="bg-green-100 rounded-full p-2 mt-1">
                                <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-gray-900">New participant joined Women's Support group</p>
                                <p class="text-xs text-gray-500">2 minutes ago</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-4">
                            <div class="bg-blue-100 rounded-full p-2 mt-1">
                                <svg class="w-4 h-4 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-gray-900">Session reminder sent for Child Custody group</p>
                                <p class="text-xs text-gray-500">15 minutes ago</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-4">
                            <div class="bg-purple-100 rounded-full p-2 mt-1">
                                <svg class="w-4 h-4 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-gray-900">Received 5-star rating for Emotional Support session</p>
                                <p class="text-xs text-gray-500">1 hour ago</p>
                            </div>
                        </div>
                    </div>
                    <button onclick="viewAnalytics()" class="mt-6 w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white py-3 px-6 rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-300 shadow-lg hover:shadow-xl font-semibold">
                        View Analytics ‚Üí
                    </button>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <button onclick="startSession()" class="bg-gradient-to-r from-green-600 to-green-700 text-white p-6 rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 animate-bounce-in">
                    <div class="text-center">
                        <svg class="w-8 h-8 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                        </svg>
                        <h3 class="font-semibold">Start Session</h3>
                        <p class="text-sm opacity-90 mt-1">Begin moderating</p>
                    </div>
                </button>

                <button onclick="manageGroups()" class="bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 animate-bounce-in">
                    <div class="text-center">
                        <svg class="w-8 h-8 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                        <h3 class="font-semibold">Manage Groups</h3>
                        <p class="text-sm opacity-90 mt-1">View participants</p>
                    </div>
                </button>

                <button onclick="manageSchedule()" class="bg-gradient-to-r from-purple-600 to-purple-700 text-white p-6 rounded-xl hover:from-purple-700 hover:to-purple-800 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 animate-bounce-in">
                    <div class="text-center">
                        <svg class="w-8 h-8 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        <h3 class="font-semibold">Schedule</h3>
                        <p class="text-sm opacity-90 mt-1">Manage sessions</p>
                    </div>
                </button>

                <button onclick="viewReports()" class="bg-gradient-to-r from-orange-600 to-orange-700 text-white p-6 rounded-xl hover:from-orange-700 hover:to-orange-800 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 animate-bounce-in">
                    <div class="text-center">
                        <svg class="w-8 h-8 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        <h3 class="font-semibold">Reports</h3>
                        <p class="text-sm opacity-90 mt-1">View analytics</p>
                    </div>
                </button>
            </div>
        </div>
    </section>

    <!-- Active Meetings Section -->
    <section class="py-16 bg-gradient-to-br from-white via-blue-50 to-white animate-fade-in">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12 animate-slide-in">
                <h2 class="text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600 bg-clip-text text-transparent mb-4 animate-gradient-shift">üìπ Active Zoom Meetings</h2>
                <p class="text-xl text-gray-600 mb-8 animate-fade-in">Manage your ongoing support sessions</p>
            </div>

            <!-- Meetings Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Sample Active Meeting 1 -->
                <div class="bg-gradient-to-br from-green-50 via-white to-green-100 rounded-2xl shadow-xl p-8 card-3d border-2 border-green-200 hover:border-green-400 animate-bounce-in">
                    <div class="text-center">
                        <div class="bg-gradient-to-br from-green-100 to-green-200 rounded-full p-6 w-16 h-16 mx-auto mb-4 flex items-center justify-center">
                            <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-green-800 mb-2">Women's Support</h3>
                        <p class="text-sm text-green-600 mb-4">Basic Group ‚Ä¢ In Progress</p>
                        <div class="bg-green-100 p-3 rounded-lg mb-4 text-left text-sm">
                            <p><strong>Participants:</strong> 8/10</p>
                            <p><strong>Duration:</strong> 32 minutes</p>
                            <p><strong>Meeting ID:</strong> 123-456-7890</p>
                        </div>
                        <div class="space-y-2">
                            <button onclick="joinMeeting('123-456-7890')" class="w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors font-medium">
                                üé• Join Session
                            </button>
                            <button onclick="viewMeetingDetails('123-456-7890')" class="w-full bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors">
                                üìä View Details
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Sample Active Meeting 2 -->
                <div class="bg-gradient-to-br from-blue-50 via-white to-blue-100 rounded-2xl shadow-xl p-8 card-3d border-2 border-blue-200 hover:border-blue-400 animate-bounce-in">
                    <div class="text-center">
                        <div class="bg-gradient-to-br from-blue-100 to-blue-200 rounded-full p-6 w-16 h-16 mx-auto mb-4 flex items-center justify-center">
                            <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-blue-800 mb-2">Child Custody</h3>
                        <p class="text-sm text-blue-600 mb-4">Premium Group ‚Ä¢ In Progress</p>
                        <div class="bg-blue-100 p-3 rounded-lg mb-4 text-left text-sm">
                            <p><strong>Participants:</strong> 5/8</p>
                            <p><strong>Duration:</strong> 18 minutes</p>
                            <p><strong>Meeting ID:</strong> 987-654-3210</p>
                        </div>
                        <div class="space-y-2">
                            <button onclick="joinMeeting('987-654-3210')" class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                                üé• Join Session
                            </button>
                            <button onclick="viewMeetingDetails('987-654-3210')" class="w-full bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors">
                                üìä View Details
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Scheduled Meeting -->
                <div class="bg-gradient-to-br from-purple-50 via-white to-purple-100 rounded-2xl shadow-xl p-8 card-3d border-2 border-purple-200 hover:border-purple-400 animate-bounce-in">
                    <div class="text-center">
                        <div class="bg-gradient-to-br from-purple-100 to-purple-200 rounded-full p-6 w-16 h-16 mx-auto mb-4 flex items-center justify-center">
                            <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-purple-800 mb-2">Emotional Support</h3>
                        <p class="text-sm text-purple-600 mb-4">Premium Group ‚Ä¢ Scheduled</p>
                        <div class="bg-purple-100 p-3 rounded-lg mb-4 text-left text-sm">
                            <p><strong>Start Time:</strong> 6:00 PM</p>
                            <p><strong>Duration:</strong> 60 minutes</p>
                            <p><strong>Meeting ID:</strong> 456-789-1230</p>
                        </div>
                        <div class="space-y-2">
                            <button onclick="startScheduledMeeting('456-789-1230')" class="w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors font-medium">
                                ‚è∞ Start Meeting
                            </button>
                            <button onclick="editMeetingDetails('456-789-1230')" class="w-full bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors">
                                ‚úèÔ∏è Edit Details
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions for Meetings -->
            <div class="mt-12 text-center">
                <div class="inline-flex space-x-4">
                    <button onclick="createNewMeeting()" class="bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 font-semibold">
                        üé• Create New Meeting
                    </button>
                    <button class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 font-semibold">
                        üìã View All Meetings
                    </button>
                    <button class="bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-3 rounded-xl hover:from-purple-700 hover:to-purple-800 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 font-semibold">
                        üìä Meeting Analytics
                    </button>
                </div>
            </div>
        </div>
    </section>

    <script>
        function logout() {
            if (confirm('üëã Are you sure you want to logout?\n\nThank you for moderating! üåü')) {
                window.location.href = 'index.html';
            }
        }

        // Meeting Management Functions
        function createNewMeeting() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.id = 'createMeetingModal';

            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4">
                    <div class="text-center">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">üé• Create New Meeting</h3>
                        <form class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Meeting Topic</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="womens-support">Women's Support</option>
                                    <option value="mens-support">Men's Support</option>
                                    <option value="emotional-support">Emotional Support</option>
                                    <option value="child-custody">Child Custody</option>
                                    <option value="nri-section">NRI Section</option>
                                    <option value="alimony">Alimony</option>
                                    <option value="maintenance">Maintenance</option>
                                    <option value="property">Property</option>
                                    <option value="domestic-violence">Domestic Violence</option>
                                    <option value="child-abuse">Child Abuse</option>
                                    <option value="extra-marital">Extra Marital Issues</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Group Type</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="basic">Basic (Free)</option>
                                    <option value="premium">Premium</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Duration (minutes)</label>
                                <input type="number" min="15" max="120" value="45" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div class="flex space-x-3">
                                <button type="button" onclick="closeCreateMeetingModal()" class="flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors">
                                    Cancel
                                </button>
                                <button type="submit" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                                    Create Meeting
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.remove();
            }
        }

        function joinMeeting(meetingId) {
            // Redirect to the meeting page or open in new tab
            window.open(`meeting.html?id=${meetingId}`, '_blank');
        }

        function viewMeetingDetails(meetingId) {
            // Redirect to meeting details page
            window.location.href = `meeting-details.html?id=${meetingId}`;
        }

        function startScheduledMeeting(meetingId) {
            // Redirect to session management page
            window.location.href = `session-management.html?id=${meetingId}`;
        }

        function hideNotification() {
            const notification = document.getElementById('notificationPanel');
            if (notification) {
                notification.classList.add('hidden');
            }
        }

        function toggleModeratorChat() {
            const chatPanel = document.getElementById('moderatorChatPanel');
            const chatToggleBtn = document.getElementById('moderatorChatToggleBtn');

            if (chatPanel.classList.contains('hidden')) {
                chatPanel.classList.remove('hidden');
                chatToggleBtn.classList.add('hidden');
            } else {
                chatPanel.classList.add('hidden');
                chatToggleBtn.classList.remove('hidden');
            }
        }

        function selectUserChat(userId) {
            const chatMessages = document.getElementById('moderatorChatMessages');
            const chatInput = document.getElementById('moderatorChatInput');

            // Clear previous messages
            chatMessages.innerHTML = '';

            // Load conversation for selected user
            loadUserConversation(userId);

            // Focus on input
            setTimeout(() => {
                chatInput.focus();
            }, 100);
        }

        function loadUserConversation(userId) {
            const chatMessages = document.getElementById('moderatorChatMessages');

            // Simulate loading conversation
            const conversations = {
                'user1': [
                    { sender: 'user', message: 'I need help with my divorce situation', time: '2 minutes ago' },
                    { sender: 'moderator', message: 'I understand this is difficult. I\'m here to help you through this process.', time: '1 minute ago' },
                    { sender: 'user', message: 'Thank you. I\'m feeling overwhelmed.', time: 'Just now' }
                ],
                'user2': [
                    { sender: 'user', message: 'Can you help me understand child custody?', time: '5 minutes ago' },
                    { sender: 'moderator', message: 'Of course! Child custody can be complex. Let me explain the key aspects.', time: '4 minutes ago' }
                ]
            };

            const conversation = conversations[userId] || [];

            conversation.forEach(msg => {
                const messageDiv = document.createElement('div');
                if (msg.sender === 'user') {
                    messageDiv.className = 'flex items-start justify-end space-x-2';
                    messageDiv.innerHTML = `
                        <div class="bg-blue-600 text-white rounded-lg p-3 shadow-sm max-w-xs">
                            <p class="text-sm">${msg.message}</p>
                            <p class="text-xs text-blue-200 mt-1">${msg.time}</p>
                        </div>
                        <div class="bg-gray-300 rounded-full p-2">
                            <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                    `;
                } else {
                    messageDiv.className = 'flex items-start space-x-2';
                    messageDiv.innerHTML = `
                        <div class="bg-green-100 rounded-full p-2">
                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                        <div class="bg-white rounded-lg p-3 shadow-sm max-w-xs">
                            <p class="text-sm text-gray-800">${msg.message}</p>
                            <p class="text-xs text-gray-500 mt-1">You ‚Ä¢ ${msg.time}</p>
                        </div>
                    `;
                }
                chatMessages.appendChild(messageDiv);
            });

            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function viewAllGroups() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.id = 'viewAllGroupsModal';

            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-6xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">üë• All Groups Management</h3>
                        <button onclick="closeModal('viewAllGroupsModal')" class="text-gray-500 hover:text-gray-700">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>

                    <!-- Active Groups -->
                    <div class="mb-8">
                        <h4 class="text-xl font-semibold text-green-800 mb-4 flex items-center">
                            <span class="bg-green-100 rounded-full p-2 mr-3">
                                <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </span>
                            Active Groups (12)
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            ${generateGroupCards('active')}
                        </div>
                    </div>

                    <!-- Inactive Groups -->
                    <div>
                        <h4 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="bg-gray-100 rounded-full p-2 mr-3">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path>
                                </svg>
                            </span>
                            Inactive Groups (8)
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            ${generateGroupCards('inactive')}
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        function generateGroupCards(status) {
            const groups = {
                active: [
                    { name: "Women's Support - English", participants: 15, nextSession: "2:00 PM", type: "Basic" },
                    { name: "Child Custody - Hindi", participants: 8, nextSession: "4:00 PM", type: "Premium" },
                    { name: "Emotional Support - Tamil", participants: 12, nextSession: "6:00 PM", type: "Premium" },
                    { name: "Men's Support - English", participants: 9, nextSession: "3:00 PM", type: "Basic" },
                    { name: "Property Division - Telugu", participants: 6, nextSession: "5:00 PM", type: "Basic" },
                    { name: "Alimony Discussion - Kannada", participants: 11, nextSession: "7:00 PM", type: "Premium" }
                ],
                inactive: [
                    { name: "NRI Support - Malayalam", participants: 0, nextSession: "Tomorrow 10:00 AM", type: "Premium" },
                    { name: "Domestic Violence - English", participants: 0, nextSession: "Tomorrow 11:00 AM", type: "Basic" },
                    { name: "Child Abuse Support - Hindi", participants: 0, nextSession: "Tomorrow 2:00 PM", type: "Premium" }
                ]
            };

            return groups[status].map(group => `
                <div class="bg-gradient-to-br from-white to-gray-50 rounded-lg p-4 border border-gray-200 hover:border-gray-300 transition-colors">
                    <div class="flex justify-between items-start mb-3">
                        <h5 class="font-semibold text-gray-800">${group.name}</h5>
                        <span class="px-2 py-1 text-xs rounded-full ${group.type === 'Premium' ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700'}">
                            ${group.type}
                        </span>
                    </div>
                    <div class="space-y-2 text-sm text-gray-600">
                        <p>üë• Participants: ${group.participants}</p>
                        <p>‚è∞ Next Session: ${group.nextSession}</p>
                    </div>
                    <div class="mt-4 flex space-x-2">
                        <button onclick="manageGroup(&quot;${group.name}&quot;)" class="flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg hover:bg-blue-700 text-xs">
                            Manage
                        </button>
                        <button onclick="viewGroupDetails(&quot;${group.name}&quot;)" class="flex-1 bg-gray-200 text-gray-700 py-2 px-3 rounded-lg hover:bg-gray-300 text-xs">
                            Details
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function manageGroup(groupName) {
            // Redirect to group management page
            window.location.href = `group-management.html?name=${encodeURIComponent(groupName)}`;
        }

        function viewGroupDetails(groupName) {
            // Redirect to group details page
            window.location.href = `group-details.html?name=${encodeURIComponent(groupName)}`;
        }

        function viewAnalytics() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.id = 'analyticsModal';

            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">üìä Moderator Analytics</h3>
                        <button onclick="closeModal('analyticsModal')" class="text-gray-500 hover:text-gray-700">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>

                    <!-- Stats Overview -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6 text-center">
                            <div class="text-3xl font-bold text-blue-600 mb-2">47</div>
                            <div class="text-sm text-blue-800">Total Sessions</div>
                        </div>
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-6 text-center">
                            <div class="text-3xl font-bold text-green-600 mb-2">4.8‚≠ê</div>
                            <div class="text-sm text-green-800">Avg Rating</div>
                        </div>
                        <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-6 text-center">
                            <div class="text-3xl font-bold text-purple-600 mb-2">156</div>
                            <div class="text-sm text-purple-800">Hours Moderated</div>
                        </div>
                    </div>

                    <!-- Performance Metrics -->
                    <div class="space-y-6">
                        <div>
                            <h4 class="text-lg font-semibold text-gray-800 mb-3">üìà Performance Metrics</h4>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-gray-600">Session Completion Rate</span>
                                        <span class="font-semibold text-green-600">94%</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-gray-600">Average Session Duration</span>
                                        <span class="font-semibold text-blue-600">52 minutes</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-gray-600">User Satisfaction Score</span>
                                        <span class="font-semibold text-purple-600">4.7/5.0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        function startSession() {
            // Redirect to session management page
            window.location.href = 'session-management.html';
        }

        function manageGroups() {
            // Redirect to groups management page
            window.location.href = 'groups-management.html';
        }

        function manageSchedule() {
            // Redirect to schedule management page
            window.location.href = 'schedule-management.html';
        }

        function viewReports() {
            // Redirect to reports page
            window.location.href = 'reports.html';
        }

        // Handle URL parameters for user join notifications
        function handleUserJoinNotification() {
            const urlParams = new URLSearchParams(window.location.search);
            const action = urlParams.get('action');
            const topic = urlParams.get('topic');
            const groupType = urlParams.get('groupType');
            const timestamp = urlParams.get('timestamp');

            if (action === 'userJoined' && topic && groupType) {
                // Show notification using the panel
                const notificationPanel = document.getElementById('notificationPanel');
                const notificationTopic = document.getElementById('notificationTopic');
                const notificationTime = document.getElementById('notificationTime');

                if (notificationPanel && notificationTopic && notificationTime) {
                    notificationTopic.textContent = `${topic} - ${groupType} Group`;
                    notificationTime.textContent = new Date(timestamp).toLocaleTimeString();
                    notificationPanel.classList.remove('hidden');

                    // Update stats
                    updateStatsOnJoin(topic, groupType);
                }

                // Clean URL
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        }

        function updateStatsOnJoin(topic, groupType) {
            // Update participant count - target the specific element with participant count
            const participantsCard = document.querySelector('.text-green-600');
            if (participantsCard) {
                const currentCount = parseInt(participantsCard.textContent);
                participantsCard.textContent = (currentCount + 1).toString();
            }

            // Add to recent activity
            addToRecentActivity(topic, groupType);
        }

        function addToRecentActivity(topic, groupType) {
            const activityContainer = document.querySelector('.space-y-4');
            if (activityContainer) {
                const activityItem = document.createElement('div');
                activityItem.className = 'flex items-start space-x-4';
                activityItem.innerHTML = `
                    <div class="bg-green-100 rounded-full p-2 mt-1">
                        <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-gray-900">New user joined ${topic} ${groupType} group</p>
                        <p class="text-xs text-gray-500">Just now</p>
                    </div>
                `;

                // Insert at the beginning
                activityContainer.insertBefore(activityItem, activityContainer.firstChild);
            }
        }

        // Mock Data for Moderator Dashboard
        window.moderatorMockData = {
            groups: [
                {
                    id: 1,
                    name: "Women's Support - English",
                    status: "active",
                    participants: 15,
                    maxParticipants: 20,
                    moderator: "Dr. Sarah Johnson",
                    nextSession: "2:00 PM",
                    type: "Basic",
                    sessions: 23,
                    avgRating: 4.8
                },
                {
                    id: 2,
                    name: "Child Custody - Hindi",
                    status: "active",
                    participants: 8,
                    maxParticipants: 15,
                    moderator: "Mr. Rajesh Kumar",
                    nextSession: "4:00 PM",
                    type: "Premium",
                    sessions: 18,
                    avgRating: 4.6
                },
                {
                    id: 3,
                    name: "Emotional Support - Tamil",
                    status: "active",
                    participants: 12,
                    maxParticipants: 18,
                    moderator: "Ms. Priya Sharma",
                    nextSession: "6:00 PM",
                    type: "Premium",
                    sessions: 15,
                    avgRating: 4.9
                },
                {
                    id: 4,
                    name: "NRI Support - Malayalam",
                    status: "inactive",
                    participants: 0,
                    maxParticipants: 12,
                    moderator: "Dr. Sarah Johnson",
                    nextSession: "Tomorrow 10:00 AM",
                    type: "Premium",
                    sessions: 8,
                    avgRating: 4.7
                }
            ],
            sessions: [
                {
                    id: 1,
                    groupId: 1,
                    startTime: "2024-01-15T14:00:00Z",
                    endTime: "2024-01-15T15:00:00Z",
                    participants: 15,
                    status: "completed",
                    rating: 4.8,
                    feedback: "Very helpful session"
                },
                {
                    id: 2,
                    groupId: 2,
                    startTime: "2024-01-15T16:00:00Z",
                    endTime: "2024-01-15T17:00:00Z",
                    participants: 8,
                    status: "completed",
                    rating: 4.6,
                    feedback: "Good discussion on legal aspects"
                },
                {
                    id: 3,
                    groupId: 3,
                    startTime: "2024-01-15T18:00:00Z",
                    endTime: "2024-01-15T19:00:00Z",
                    participants: 12,
                    status: "in_progress",
                    rating: null,
                    feedback: null
                }
            ],
            analytics: {
                totalSessions: 47,
                avgRating: 4.8,
                totalHours: 156,
                completionRate: 94,
                avgDuration: 52,
                userSatisfaction: 96,
                groupsManaged: 12,
                activeUsers: 248
            },
            activeUsers: [
                {
                    id: "user1",
                    name: "Anonymous User",
                    group: "Women's Support - English",
                    joinTime: "2 minutes ago",
                    status: "active",
                    messages: 3
                },
                {
                    id: "user2",
                    name: "Anonymous User",
                    group: "Child Custody - Hindi",
                    joinTime: "5 minutes ago",
                    status: "active",
                    messages: 1
                }
            ]
        };

        // Initialize Lucide icons
        lucide.createIcons();
    </script>
</body>
</html>
